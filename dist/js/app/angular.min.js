function redrawLayout(){msnry.layout(),redrawingLayout||(redrawingLayout=!0,setTimeout(function(){msnry.layout()},350),setTimeout(function(){msnry.layout()},550),setTimeout(function(){msnry.layout(),redrawingLayout=!1},750))}function addNewElement(){var t,e,n=tempUrl[Math.floor(10*Math.random())],o=document.createElement("img");o.onload=function(){console.log("img loaded"),t=document.createElement("div"),t.appendChild(o),e=document.createElement("div"),e.setAttribute("class","item new"+Math.floor(3*Math.random()+1)),e.appendChild(t),document.getElementById("gallery").appendChild(e),msnry.appended(e),redrawLayout(),imgRequests-=1,loadElements()},o.setAttribute("src",n)}function loadElements(){var t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,e=document.getElementById("loading").getBoundingClientRect().top<1.25*t;e&&(console.log("load!"),imgRequests<=7&&(imgRequests+=1,addNewElement()))}angular.module("MyApp").config(function(t){t.theme("default").primaryPalette("teal")}).controller("AppCtrl",function(t,e,n,o,i){function l(t){var e=o.debounce(function(){n(t).toggle().then(function(){i.debug("toggle "+t+" is done")})},300);return e}t.toggleLeft=l("left")}).controller("LeftCtrl",function(t,e,n,o){t.close=function(){n("left").close()}});var redrawingLayout=!1,imgRequests=0,tempUrl=["https://ununsplash.imgix.net/photo-1428976343495-f2c66e701b2b?fit=crop&fm=jpg&q=75&w=1050","https://unsplash.imgix.net/photo-1428976365951-b70e0fa5c551?fit=crop&fm=jpg&h=700&q=75&w=1050","https://unsplash.imgix.net/photo-1428959249159-5706303ea703?fit=crop&fm=jpg&h=700&q=75&w=1050","https://ununsplash.imgix.net/photo-1428699190791-2c4f8b144d06?fit=crop&fm=jpg&h=1575&q=75&w=1050","https://ununsplash.imgix.net/photo-1428908728789-d2de25dbd4e2?fit=crop&fm=jpg&h=700&q=75&w=1050","https://ununsplash.imgix.net/photo-1427434846691-47fc561d1179?fit=crop&fm=jpg&h=700&q=75&w=1050","https://unsplash.imgix.net/photo-1414432667065-fbbcad756703?fit=crop&fm=jpg&h=800&q=75&w=1050","https://ununsplash.imgix.net/reserve/AXx3QORhRDKAMrbb8pX4_photo%202.JPG?fit=crop&fm=jpg&h=700&q=75&w=1050","https://unsplash.imgix.net/photo-1428342319217-5fdaf6d7898e?fit=crop&fm=jpg&h=500&q=75&w=1050","https://ununsplash.imgix.net/reserve/8S64npOgTu2eWTZIXEfy_DSC_0955.JPG?fit=crop&fm=jpg&h=700&q=75&w=1050"];document.addEventListener("DOMContentLoaded",function(){msnry=new Masonry("#gallery",{percentPosition:"true",itemSelector:".item",transitionDuration:0}),window.onresize=function(){redrawLayout(),loadElements()},document.getElementById("container").onscroll=function(){loadElements(),console.log(imgRequests)},loadElements()});