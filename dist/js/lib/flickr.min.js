function doMouseDown(e){paint=!0,x=e.clientX,y=e.layerY,cntxt.moveTo(x-left,y-canvastop),cntxt.beginPath(),cntxt.stroke()}function doMouseUp(e){paint=!1,x=e.clientX,y=e.clientY,cntxt.lineTo(x-left+1,y-canvastop+1),cntxt.stroke(),cntxt.closePath()}function doMouseMove(e){fill=document.getElementById("fill").value,thickness=document.getElementById("width2").value,colors=document.getElementById("colors").value,cntxt=canvas.getContext("2d"),cntxt.strokeStyle=colors,cntxt.lineWidth=thickness,cntxt.lineCap="round",rect=canvas.getBoundingClientRect(),canvastop=rect.top,left=rect.left,paint&&(x=e.clientX,y=e.clientY,cntxt.lineTo(x-left,y-canvastop),cntxt.stroke(),isKeyPressed(e))}function downloadCanvas(){canvas.toDataURL("image/png");window.open(canvas.toDataURL("image/png"))}function isKeyPressed(e){if(1==e.shiftKey){var t=document.getElementById("fill").value,n=(document.getElementById("width2").value,document.getElementById("colors").value);cntxt.lineWidth=5,cntxt.fillStyle=t,cntxt.strokeStyle=n,cntxt.lineTo(x-findPos(canvas)[0],y-findPos(canvas)[1]),cntxt.fill(),cntxt.stroke()}}function findPos(e){var t=curtop=0;if(e.offsetParent){do t+=e.offsetLeft,curtop+=e.offsetTop;while(e=e.offsetParent);return[t,curtop]}}function logoSwitch(){if(document.getElementById("menu")){var e=document.getElementById("left"),t=document.getElementById("menu");e.removeChild(t);for(var n=document.getElementById("right");n.firstChild;)n.removeChild(n.firstChild)}else;temp=localStorage.getItem("panel"),1==temp?(canvas2(),localStorage.clear()):(flickr(),localStorage.setItem("panel","1"))}function flickr(){document.getElementById("Logo").style.background="url(images/dj.png)center";var e=document.getElementById("left"),t=(document.getElementById("right"),document.createElement("div"));t.setAttribute("id","menu"),e.appendChild(t);var n=document.getElementById("menu"),a=document.createElement("input");a.setAttribute("class","searchterm"),a.setAttribute("name","searchterm"),a.setAttribute("value",localStorage.getItem("searchterm")),n.appendChild(a);var o=document.createElement("button");o.setAttribute("id","search"),o.innerHTML="Search",n.appendChild(o);var c=document.createElement("button");c.setAttribute("id","add"),c.innerHTML="+",n.appendChild(c);var r=document.createElement("div");r.setAttribute("id","results"),n.appendChild(r),document.getElementById("search").addEventListener("click",searchButtonrun,!1),document.getElementById("add").addEventListener("click",addbuttons,!1)}function canvas2(){document.getElementById("Logo").style.background="url(images/w.png)center";var e=document.getElementById("left"),t=(document.getElementById("right"),document.createElement("div"));t.setAttribute("id","menu"),e.appendChild(t);var n=document.getElementById("menu"),a=document.createElement("button");a.setAttribute("id","download"),a.innerHTML="Download",n.appendChild(a);var o=document.createElement("button");o.setAttribute("id","clear"),o.innerHTML="Clear",n.appendChild(o);var c=document.createElement("h2");c.innerHTML="Line",n.appendChild(c);var r=document.createElement("select");r.setAttribute("id","width2");for(var d=["4","10","15"],l=["Light","Middle","Thick"],i=0;i<l.length;i++){var m=document.createElement("option");m.setAttribute("value",d[i]),m.innerHTML=l[i],r.appendChild(m)}n.appendChild(r);var s=document.createElement("h2");s.innerHTML="Colors",n.appendChild(s);var u=document.createElement("select");u.setAttribute("id","colors");for(var h=["#000000","#e74c3c","#2980b9","#2ecc71","#d35400","#8e44ad","#ecf0f1"],v=["Black","Red","Blue","Green","Orange","Purple","White"],i=0;i<v.length;i++){var p=document.createElement("option");p.setAttribute("value",h[i]),p.innerHTML=v[i],u.appendChild(p)}n.appendChild(u);var s=document.createElement("h2");s.innerHTML="Fill",n.appendChild(s);var g=document.createElement("select");g.setAttribute("id","fill");for(var i=0;i<v.length;i++){var m=document.createElement("option");m.setAttribute("value",h[i]),m.innerHTML=v[i],g.appendChild(m)}n.appendChild(g);var f=document.createElement("canvas");f.width=400,f.height=600,f.setAttribute("id","canvas_1"),document.getElementById("right").appendChild(f),canvas=document.getElementById("canvas_1"),canvas.addEventListener("mousedown",doMouseDown,!1),canvas.addEventListener("mouseup",doMouseUp,!1),canvas.addEventListener("mousemove",doMouseMove,!1),document.getElementById("clear").addEventListener("click",cleanStart,!1),document.getElementById("download").addEventListener("click",downloadCanvas,!1),cleanStart()}function cleanStart(){var e=document.getElementById("canvas_1"),t=e.getContext("2d"),n=new Image;n.onload=function(){t.drawImage(n,0,0)},n.src="images/mona.jpg"}function addbuttons(){if(numItems=document.getElementsByName("searchterm").length,5==numItems);else{var e=document.getElementById("menu"),t=document.createElement("input");t.setAttribute("class","searchterm"),t.setAttribute("name","searchterm"),t.innerHTML="Line",e.appendChild(t);var n=document.createElement("button");n.setAttribute("class","remove"),n.setAttribute("name","remove"),n.addEventListener("click",removebutton,!1),n.innerHTML="-",e.appendChild(n)}}function removebutton(){numItems=document.getElementsByName("searchterm").length;var e=document.getElementsByName("remove").length,t=document.getElementById("menu");0==numItems||(t.removeChild(document.getElementsByName("searchterm")[numItems-1]),t.removeChild(document.getElementsByName("remove")[e-1]))}function searchButtonrun(){localStorage.setItem("searchterm",document.getElementsByName("searchterm")[0].value),$(document).ready(function(e){searches="",e(".searchterm").each(function(t){searches+=e(this).val()+"+"}),e("#search").html("loading"),e("h1").remove(),e("img").remove();var t,n="https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=8b010ef32af4006f4fac0249a746289e&tags=toy&safe_search=1&per_page=1";e.getJSON(n+"&format=json&jsoncallback=?",function(n){0===n.photos.photo.length&&(e("<h1/>").attr("class","s").appendTo("#right"),e(".s").html("None found :-o")),e.each(n.photos.photo,function(n,a){if(t="http://farm"+a.farm+".static.flickr.com/"+a.server+"/"+a.id+"_"+a.secret+"_m.jpg",e("<img/>").attr("src",t).appendTo("#right"),e("img").css("opacity",0),e("img").show(),e("img").animate({opacity:1},{queue:!1,duration:"slow"}),e("img").animate({top:"-10px"},"slow"),1e3==n)return!1}),e("#search").html("Search")})})}window.onload=function(){document.getElementById("Logo").addEventListener("click",logoSwitch,!1);var e=localStorage.getItem("panel");1==e?flickr():canvas2()};var paint=!1,canvas,cntxt,canvastop,left,fill,thickness,colors,canvas,context,temp,searches="",numItems;